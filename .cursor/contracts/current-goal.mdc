---
description: Active goal manifest — single-read orientation for agents to know what matters now
---

# Current Goal

**Goal:** 100% DSL — Zero Go  
**Summary:** Asterisk is a playbook repository. There is no Python in an Ansible repo — only YAML. The Python lives in Ansible (the engine) and in collections (the plugins). Asterisk follows the same model: **zero Go code.** The Go lives in Origami (the engine) and in Origami's adapters/marbles (the collections). Achilles is a sibling playbook repository — both are analysis tools on Origami, differing only in domain (CI post-mortem vs. security probing). Any Go code in Asterisk is a signal that the framework or its adapters are missing a primitive.

## The ROI That Changes Everything

$1 per 20 cases saves 10 people an accumulated 10 days of work.

| Factor | Value |
|--------|-------|
| AI cost per batch | ~$1 |
| Labor savings per batch | ~$50,000 |
| ROI | **50,000x** |

**Implication:** Accuracy dominates. Token budget is irrelevant. A system that costs $5 instead of $1 but gets the answer right saves $49,995.

## PoC Results (baseline)

| Adapter | Scenario | M19 | Key metrics | Notes |
|---------|----------|-----|-------------|-------|
| BasicAdapter | ptp-real-ingest (18 verified) | **0.83** | M1=1.00, M2=1.00, M15=0.72 | Heuristic baseline. 19/21 metrics pass. |
| CursorAdapter | ptp-real-ingest (18 verified) | **0.58** | M2=0.78, M8=0.60, M14b=0.30 | AI baseline. 10/21 pass. |

## Current Go LOC (11,771 prod)

| Area | Prod LOC | Files | Covered by | Status |
|------|----------|-------|-----------|--------|
| `adapters/rca/` | 5,311 | 36 | **rca-pure-dsl** | Ph1-8 done; accepted residual for origami-fold |
| `cmd/asterisk/` | 3,244 | 18 | **origami-fold** | Draft (includes relocated demo/dataset/ingest) |
| `adapters/store/` | 2,373 | 8 | Store DSL migration (gap) | Origami sqlite-dsl-adapter exists; v1 deleted, V2 suffix removed |
| `internal/mcpconfig/` | 268 | 2 | **origami-fold** | Draft |
| `cmd/asterisk-analyze-rp-cursor/` | 115 | 1 | **origami-fold** | Draft (cursor wrapper binary) |
| `adapters/rp/` | 93 | 1 | **rca-pure-dsl** residual | `rp_source.go` — domain utility, not generic adapter |
| `adapters/vocabulary/` | 79 | 1 | — (loader, expected) | YAML loader — data-dsl-extraction complete |
| `adapters/calibration/scenarios/` | 42 | 1 | — (loader, expected) | YAML loader — data-dsl-extraction complete |

**True zero Go:** 11,771 LOC total. Loaders (121 LOC) are expected residual from completed contracts. Target: eliminate 11,650 LOC.

## Active Contracts

| # | Contract | Dir | Scope | Status |
|---|----------|-----|-------|--------|
| 1 | `origami-fold` | active/ | Move domain code to Origami + build `origami fold` + eliminate all Go from Asterisk (~11,650 LOC) | In progress |

### Execution order

```
    ┌──────────────────────────────────────────┐
    │ rca-pure-dsl ✓ COMPLETE                 │  moved to completed/dsl-migration/
    │    All 8 phases done                     │  5,311 LOC accepted residual
    └─────────────┬────────────────────────────┘
                  │
    ┌─────────────▼────────────────────────────┐
    │ origami-fold (ACTIVE)                    │  4 phases:
    │  Ph1: decomposition analysis             │  1. classify adapters/rca/ files
    │  Ph2: move code to Origami               │  2. create marbles/rca/ in Origami
    │  Ph3: build origami fold                 │  3. manifest → binary codegen
    │  Ph4: migrate Asterisk to YAML           │  4. zero Go
    └──────────────────────────────────────────┘

    rca-pure-dsl: COMPLETE (moved to completed/dsl-migration/)
    scorer-pattern: COMPLETE (moved to completed/dsl-migration/)
    Store DSL migration: gap — adapters/store/ (2,373 LOC) included in origami-fold scope.
```

### Uncovered gap: `adapters/store/` (2,373 LOC)

Origami's YAML-defined SQLite adapter exists (`sqlite-dsl-adapter` contract — done). The Asterisk consumer code still uses hand-written Go store implementations. Resolution paths:
- v1 dead code deleted, V2 suffix removed — unified API (`CreateCase`, `GetCase`, `SaveRCA`, `GetRCA`).
- `sqlstore_entities.go` (992 LOC) + `memstore_entities.go` (670 LOC) — migrate to Origami's YAML-driven adapter.
- Store facade + types (`store.go` 110 + `types.go` 157 + `schema.go` 80 + `adapter.go` 18 = 365 LOC) — interfaces for framework.

**Decision pending.** Scope as a dedicated contract.

## End-State Architecture

```mermaid
flowchart TB
  subgraph asterisk ["Asterisk (zero Go — YAML only)"]
    circuits["circuits/*.yaml"]
    scenarios["scenarios/*.yaml"]
    scorecards["scorecards/*.yaml"]
    prompts["prompts/*.md"]
    schema["schema.yaml"]
    vocab["vocabulary.yaml"]
    manifest["origami.yaml"]
  end
  subgraph origami ["Origami (Go engine + collections)"]
    engine["framework (walk, DSL, vars, templates)"]
    rpAdapter["adapters/rp/ (RP I/O)"]
    sqliteAdapter["adapters/sqlite/ (YAML-defined schema/CRUD)"]
    rcaMarbles["marbles/rca/ (llm-extract, context-builder, persist, score, report)"]
    fold["origami fold (YAML → binary)"]
    transformers["transformers (http, jq, file, match, dedup)"]
  end
  manifest -->|"origami fold"| fold
  fold -->|"embeds + links"| binary["bin/asterisk"]
  circuits --> engine
  scenarios --> engine
  rpAdapter --> engine
  sqliteAdapter --> engine
  rcaMarbles --> engine
  transformers --> engine
```

## Open Checklist

- [ ] CursorAdapter M19 >= 0.70 with principled weights (baseline: 0.58)
- [ ] M14b (smoking gun) confirmed >= 0.30 in wet run (baseline: 0.30 — at threshold)
- [ ] **Zero Go (umbrella):** Asterisk repo contains zero `.go` files — all 11,771 LOC resolved.

## Completed Contracts (this goal)

| Contract | LOC impact | Phase |
|----------|-----------|-------|
| `data-dsl-extraction` | -2,900 LOC (scenario struct literals → YAML) | dsl-migration |
| `adapter-migration` | -600 LOC (RP adapter → Origami) | dsl-migration |
| `sqlite-dsl-adapter` | Origami primitive built; Asterisk migration pending | dsl-migration |
| `scorer-pattern` | -700 LOC (21 Go scorers → 10 batch patterns in Origami YAML) | dsl-migration |

All prior goals achieved. Bundles 1-4 (Principled Metrics, Rich Names, Smart Routing, Demo Polish) complete. Full history: `notes/goal-history-poc.md`

## Goal Transition Protocol

When zero Go is achieved:

1. Archive this manifest in `notes/` as `goal-history-100-dsl.md`
2. Evaluate next goal: production hardening, multi-operator expansion, or community release
3. Reassess all draft contracts — re-tier relative to the next goal
