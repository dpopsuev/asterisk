---
description: Shared domain definitions for Asterik
---

# Glossary

- **Asterik** — Standalone CLI (possibly evolving into a side-car service) for RCA on test failures using external repos and CI/infra context. **Command:** `asterisk`. **PoC:** only **`asterisk --cursor`** (Cursor as model; Asterik = prompt injector + dialog; investigation data → Asterik DB). Other modes (e.g. TUI with another model) are post-PoC. Interacts with ReportPortal via the **RP API** (client, not an RP plugin). **Written in Go.**
- **RCA** — Root Cause Analysis based on evidence (logs, commits, pipeline context).
- **RP** — ReportPortal.
- **Execution DB** — Source of execution data (launch, test items, failures). **RP is the Execution DB:** envelope and failure list come from Report Portal via API (e.g. launch by ID). We do not use Jenkins dump or local job logs as the source of execution data. See `docs/envelope-mental-model.mdc`.
- **MCP** — Model Context Protocol; standardized tool interface for AI to access external systems.
- **Context Source** — a single external or internal data source used to enrich analysis (e.g., repo, CI artifact).
- **Context Workspace** — key-value–style config on FS (YAML/JSON/TOML) listing pointers to local or remote git repos plus **agentic meta** (purpose/role per repo for RCA). Unlike Cursor workspaces (paths only), context workspace carries *what each path is for* so the agent can use repos correctly; that meta lives **separately from prompts**. Optional per-repo branch override; otherwise ref from Execution Envelope. Versionable, shareable. See `docs/context-workspace.mdc`.
- **ExecutionEnvelope** — adapter-normalized run container used as Asterik analysis input. Includes **vital git metadata** (`git.branch`, `git.commit`, optional `git.remote`/repo URL) so the correct branch/ref can be used for each repo without manual intervention. See `docs/execution-envelope.mdc`.
- **Investigation case** — one failed test case; unit of agent work. Keyed by **investigation envelope** (job ID, run path, failed test name, etc.). CLI opens one case per failure; stored via **storage adapter** (SQLite for now). See `docs/cli-data-model.mdc`.
- **Storage adapter** — abstraction over persistence (cases, RCAs, pipeline hierarchy). CLI and domain logic use the adapter interface only; implementation is SQLite today, swappable later (e.g. other DB or remote store) for future-proofing. See `docs/cli-data-model.mdc`.
- **Investigation envelope** — context identifying a single failure (job ID, run ID, clock type, artifact paths); may align with or derive from Execution Envelope. Used to key investigation cases and avoid duplicates.
- **RCA** (in data model) — first-class entity in DB, **independent of pipeline/envelope**: title, description, defect type, evidence; optional **Jira ticket ID** and **Jira link** (URL). RCAs become Jira bugs; no Jira integration yet — model allows storing ticket ID/link and, when extended, **tracking ticket status via CLI**. Many cases (within or across pipelines/versions) can reference one RCA. See `docs/cli-data-model.mdc`.
- **Convergence check** — the process of deciding whether the analysis has converged on an RCA; outcome gates the next step (deepen analysis, try next Context Source, or stop).
- **Convergence score** — the score used in a convergence check (high = converging toward a clear RCA, low = not enough signal); the Coordinator uses it to select the next action.
- **Prompt template** — file-based RCA prompt (parameterized by launch, workspace, ref, etc.). During development lives in `.cursor/prompts/`; when stable, moved to the CLI’s prompt directory. See `docs/prompts.mdc`.
- **Cursor mode** — `asterisk --cursor`: Asterik uses Cursor as the backing model. Symbiotic flow: Asterik injects prompts and conducts a dialog with Cursor; investigation data (cases, RCAs, assessment) is written to the Asterik DB so state survives across the conversation. See `notes/poc-flow.mdc`.
- **Red–green–blue** — prompt development loop: experiment (red) → get to a passing outcome (green) → refine and lock in (blue). File-based prompts allow iterate-in-Cursor without rebuilding the CLI.
- **Sensitive data** — In Asterik context: Execution Envelope / launch data, artifact contents (RCA message, defect type, evidence refs), context workspace config (including repo URLs and tokens), RP API tokens, AI provider keys, and any PII. Handling must cover encryption in transit and at rest, minimal logging/retention, and no unnecessary persistence of secrets or PII.
- **Access control** — For a standalone Asterik service: authentication (who is calling) and authorization (which operations — e.g. analyze, push, fetch — are allowed for that caller). Required if building a long-running service (see constraints).

## Two-tier data model

The data model has two tiers: **investigation-scoped** entities (the execution tree) and **global knowledge** entities (institutional memory). See `docs/cli-data-model.mdc` and `contracts/investigation-context.md`.

### The three pillars — witness, story, criminal

The canonical chain: `Test Case ──reports──▶ Symptom ──caused by──▶ Root Cause (RCA)`.

A failed **Test Case** is a witness reporting a crime. The **Symptom** is the story (observable pattern). The **Root Cause** is the criminal (actual bug). Same story can point to different criminals in different contexts; different stories can point to the same criminal.

- **Case (the witness)** — One failed test instance. Leaf of the execution tree. Reports a symptom. The canonical path to root cause is always through the symptom: `Case → Symptom → SymptomRCA → RCA`. `case.rca_id` is a denormalized verdict shortcut.
- **Symptom (the story)** — A recognized failure pattern in the **global knowledge** tier. The observable "story" that test cases report. Identified by a **fingerprint** (deterministic hash of normalized test_name_pattern + error_pattern + component). Cross-version: the same symptom can appear in 4.20, 4.21, 4.22. Multiple cases can tell the same story. Tracks `first_seen_at`, `last_seen_at`, `occurrence_count`, and a temporal `status` (active / dormant / resolved). See **Symptom staleness** below.
- **RCA (the criminal)** — Root cause analysis — the actual bug, misconfiguration, or infra issue. Cross-version, cross-suite. One criminal can cause many stories; the "serial killer" pattern spans versions.
- **SymptomRCA (story ↔ criminal junction)** — Many-to-many "caused by" link. Same story can point to different criminals in different contexts (same symptom, different RCA in different versions); same criminal can produce different stories (one RCA explains multiple symptoms). This is the **global knowledge graph**. Carries a `confidence` score and `notes`.

### Investigation-scoped entities

- **Investigation Suite** — Top-level grouping for a regression analysis. Spans versions. An analyst opens a suite (e.g. "PTP Feb 2026 regression") and populates it with pipelines across versions. Lifecycle: `open` → `closed`.
- **Version** — Product/OCP version (e.g. `4.21`). First-class entity shared across suites so we can query "all symptoms affecting version X."
- **Pipeline** — One CI pipeline run for one version. Bound to a suite + version. Contains launches.
- **Launch** — One RP launch (evolves from the former `envelopes` blob). Contains jobs. Stores extracted fields (env attributes, git metadata) plus the full envelope payload.
- **Job** — One test execution group within a launch (maps to RP TEST-level items, e.g. `[T-TSC] RAN PTP tests`). Contains cases. Carries execution stats (total, failed, passed, skipped).
- **Triage** — F1 prompt family output per case. One per case. Records symptom category, severity, defect type hypothesis, and guard flags (clock_skew_suspected, cascade_suspected).

### Global knowledge terms

- **Symptom fingerprint** — Deterministic hash used to match new failures against known symptoms. Algorithm: `hash(normalize(test_name_pattern) + normalize(error_pattern) + component)`. Normalization: lowercase, collapse whitespace, strip ANSI codes, strip numeric IDs. Fuzzy/embedding matching is a post-PoC enhancement.
- **Symptom staleness** — Temporal rule: if a symptom's `last_seen_at` is older than a configurable window (default 90 days) and its status is `active`, it auto-transitions to `dormant`. Dormant symptoms get lower recall confidence in F0. If a dormant symptom reappears, it transitions back to `active` — a strong signal of **regression** (fix reverted or backport missing).
- **RCA temporal status** — RCA lifecycle: `open` (under investigation) → `resolved` (fix identified/merged; `resolved_at` set) → `verified` (fix confirmed in CI; `verified_at` set) → `archived` (no longer relevant; `archived_at` set). A `resolved`+`verified` RCA whose symptom reappears in a new version = **backport regression**. RCAs can be reopened: `resolved`/`verified` → `open` (clears temporal timestamps).

## Hierarchy: tree terms and domain naming

The execution model is a **recursive hierarchy**: at the bottom are executions/steps (leaves); above them are containers that can themselves contain more containers, to any depth (**Envelope of Envelope**).

### Formal tree terms (for specs / model only)

| Term | Meaning |
|------|--------|
| **Leaf** | Node with no children — one execution/run. |
| **Branch** | Node that has children (internal node). |
| **Tree** | One root + all descendants (e.g. one launch and its items). |
| **Forest** | Disjoint set of trees (e.g. several launches under one campaign). |
| **Forest of forests** | Collection of forests (e.g. many campaigns); can repeat to any depth. |

Use these in formal hierarchy descriptions; prefer **domain terms** in APIs and user-facing text.

### Domain naming (recommended in APIs and docs)

| Term | Level | Meaning |
|------|--------|-------|
| **Step** | Leaf | One failed test step (RP type STEP); **one investigation case per step**. |
| **Job** | Branch under launch | Group under a launch (e.g. one TEST like [T-TSC] RAN PTP tests); contains steps. |
| **Launch** | Tree root | One run from RP; envelope that directly contains jobs and steps. |
| **Envelope** | Recursive container | Any container: can contain other **Envelopes** or steps. Launch is an Envelope; a future “Campaign” is an Envelope of Launches. **Envelope of Envelope** can nest arbitrarily (campaigns, programs, etc.). |

- **Execution** — Optional: one *run* of a step; use **Step** for “one case per failure” unless you need to model multiple runs of the same step.