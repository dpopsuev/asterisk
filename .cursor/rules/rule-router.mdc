---
description: "Rule router — magic-word lookup table mapping user intent to the correct rule file"
alwaysApply: true
---

# Rule Router

When the user's message matches a trigger phrase, read the referenced rule before acting.

| Trigger phrases | Rule | Path |
|-----------------|------|------|
| "create contract", "new contract", "draft contract", "contract template" | Knowledge Store + Contract Sizing | `domain/knowledge-store.mdc` + `domain/contract-sizing.mdc` |
| "update contract", "contract note", "log insight", "calibration finding" | Contract Iteration | `domain/contract-iteration.mdc` |
| "size contract", "split contract", "must/should/nice", "too big" | Contract Sizing | `domain/contract-sizing.mdc` |
| "save block", "persist", "where does this go" | Knowledge Store | `domain/knowledge-store.mdc` |
| "architecture diagram", "mermaid", "current architecture", "desired architecture" | Architecture Snapshots | `domain/architecture-snapshots.mdc` |
| "generic vs specific", "abstraction", "scenario-specific", "adapter pattern" | Abstraction Boundaries | `universal/abstraction-boundaries.mdc` |
| "reviewability", "git-diffable", "observable", "binary format" | Reviewability First | `universal/reviewability-first.mdc` |
| "write test", "test coverage", "red green", "TDD", "security test", "test matrix" | Testing Methodology | `universal/testing-methodology.mdc` |
| "BDD", "Gherkin", "Given/When/Then", "acceptance criteria", "behavior-driven" | Testing Methodology + Project Standards | `universal/testing-methodology.mdc` + `domain/project-standards.mdc` |
| "Ginkgo", "Gomega", "test naming", "test fixture", "table-driven" | Go Test Conventions | `universal/go-test-conventions.mdc` |
| "security", "OWASP", "vulnerability", "trust boundary", "injection", "SSRF" | Security Analysis | `universal/security-analysis.mdc` |
| "hostname", "internal URL", "data scrub", "scrubbed", "placeholder" | Data Hygiene | `domain/data-hygiene.mdc` |
| "add dependency", "go module", "third-party library", "off-the-shelf" | Off-the-Shelf | `universal/off-the-shelf.mdc` |
| "calibration", "MCP", "signal bus", "subagent", "dispatch", "emit_signal" | Agent Bus (Origami) | See `github.com/dpopsuev/origami/.cursor/rules/domain/agent-bus.mdc` |
| "workspace", "local repo", "service-api", "RP version", "read from disk" | Workspace Context | `domain/workspace-context.mdc` |
| "display name", "human readable", "codes for machines", "output format" | Human-Readable Output | `domain/human-readable-output.mdc` |
| "DSL", "pipeline format", "YAML pipeline", "pipeline definition", "declarative pipeline" | DSL Design Principles (Origami) | See `github.com/dpopsuev/origami/.cursor/rules/domain/dsl-design-principles.mdc` |

## Auto-loaded (no trigger needed)

These three rules are `alwaysApply: true` and load in every conversation:

- `domain/project-standards.mdc` — product definition, methodology, calibration ordering
- `domain/agent-operations.mdc` — local pipeline, timeouts, abort protocol, observability
- `domain/knowledge-store.mdc` — .cursor/ structure, index integrity, persistence protocol
