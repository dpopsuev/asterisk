# A simple 4-node "bug triage" pipeline for demonstrating the framework.
# This is NOT the production RCA pipeline â€” it's a teaching example.
pipeline: bug-triage
description: "Classify a bug, investigate it, decide, and close."

zones:
  intake:
    nodes: [classify, investigate]
    element: fire
    stickiness: 0
  resolution:
    nodes: [decide, close]
    element: earth
    stickiness: 2

nodes:
  - name: classify
    element: fire
    family: classify
  - name: investigate
    element: water
    family: investigate
  - name: decide
    element: diamond
    family: decide
  - name: close
    element: air
    family: close

edges:
  - id: E1
    name: obvious-bug
    from: classify
    to: decide
    shortcut: true
    condition: "confidence >= 0.90 (skip investigation)"

  - id: E2
    name: needs-investigation
    from: classify
    to: investigate
    condition: "confidence < 0.90 (investigate further)"

  - id: E3
    name: evidence-found
    from: investigate
    to: decide
    condition: "convergence_score >= 0.70"

  - id: E4
    name: keep-digging
    from: investigate
    to: investigate
    loop: true
    condition: "convergence_score < 0.70 AND loops < max_loops"

  - id: E5
    name: approved
    from: decide
    to: close
    condition: "decision == approve"

  - id: E6
    name: reassess
    from: decide
    to: investigate
    loop: true
    condition: "decision == reassess"

  - id: E7
    name: done
    from: close
    to: _done
    condition: "always (terminal)"

start: classify
done: _done
