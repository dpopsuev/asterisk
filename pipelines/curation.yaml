# Generic unstructured-to-structured curation pipeline.
# Domain-agnostic â€” used by Asterisk's origami adapter and any future curation use case.
# Edge evaluation logic is registered via EdgeFactory in Go (internal/curate/pipeline.go).
pipeline: curation
description: "Generic unstructured-to-structured curation pipeline"

zones:
  intake:
    nodes: [fetch]
    element: water
    stickiness: 0
  extraction:
    nodes: [extract, validate]
    element: earth
    stickiness: 1
  enrichment:
    nodes: [enrich, promote]
    element: fire
    stickiness: 2

nodes:
  - name: fetch
    element: water
    family: fetch
  - name: extract
    element: earth
    family: extract
  - name: validate
    element: earth
    family: validate
  - name: enrich
    element: fire
    family: enrich
  - name: promote
    element: fire
    family: promote

edges:
  - id: CE1
    name: extract-ready
    from: fetch
    to: extract
    condition: "raw evidence available"

  - id: CE2
    name: validation-pass
    from: extract
    to: validate
    condition: "fields extracted"

  - id: CE3
    name: incomplete
    from: validate
    to: fetch
    loop: true
    condition: "missing required fields, more sources available"

  - id: CE4
    name: enrich-ready
    from: validate
    to: enrich
    condition: "completeness above threshold"

  - id: CE5
    name: promote-ready
    from: enrich
    to: promote
    condition: "all required fields present"

  - id: CE6
    name: done
    from: promote
    to: _done
    condition: "always (terminal)"

start: fetch
done: _done
