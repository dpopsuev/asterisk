# D0-D4 Adversarial Dialectic pipeline.
# Shadow path activates when Light F5 confidence is in the uncertain range.
# Edge evaluation logic is registered via BuildDialecticEdgeFactory in Go.
pipeline: defect-dialectic
description: "D0-D4 adversarial dialectic review pipeline"

zones:
  thesis:
    nodes: [indict]
    element: fire
    stickiness: 0
  discovery:
    nodes: [discover, defend]
    element: water
    stickiness: 2
  synthesis:
    nodes: [hearing, verdict]
    element: diamond
    stickiness: 3

nodes:
  - name: indict
    element: fire
    family: indict
  - name: discover
    element: earth
    family: discover
  - name: defend
    element: water
    family: defend
  - name: hearing
    element: air
    family: hearing
  - name: verdict
    element: diamond
    family: verdict

edges:
  - id: HD1
    name: fast-track
    from: indict
    to: defend
    shortcut: true
    condition: "thesis confidence >= 0.95"

  - id: HD2
    name: concession
    from: defend
    to: verdict
    shortcut: true
    condition: "antithesis-holder concedes"

  - id: HD3
    name: partial-negation
    from: defend
    to: hearing
    condition: "antithesis-holder has partial negation"

  - id: HD4
    name: alternative-hypothesis
    from: defend
    to: hearing
    condition: "antithesis-holder has alternative hypothesis"

  - id: HD5
    name: dialectic-complete
    from: hearing
    to: verdict
    condition: "max rounds reached OR convergence"

  - id: HD6
    name: affirm
    from: verdict
    to: _done
    condition: "synthesis == affirm"

  - id: HD7
    name: amend
    from: verdict
    to: _done
    condition: "synthesis == amend"

  - id: HD8
    name: remand
    from: verdict
    to: indict
    loop: true
    condition: "synthesis == remand AND negations < max_negations"

  - id: HD9
    name: acquit
    from: verdict
    to: _done
    condition: "synthesis == acquit (evidence gap brief)"

  - id: HD12
    name: unresolved-contradiction
    from: verdict
    to: _done
    condition: "synthesis == unresolved"

start: indict
done: _done
